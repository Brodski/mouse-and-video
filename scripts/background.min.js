let isDebugging=!1;0==isDebugging&&(console.log=function(...a){});let run=!0,previousTabIndex,popups={};browser.tabs.onActivated.addListener(a=>{console.log("background - activated!");browser.windows.get(a.windowId).then(c=>{"popup"!==c.type&&browser.tabs.get(a.previousTabId).then(b=>{previousTabIndex=b.index})})});
function handlePopUp(a,c){"criar"===a.acao?browser.windows.create({width:370,height:230,type:"popup",tabId:c.tab.id}).then(b=>{popups[b.id]={tabIndex:c.tab.index,windowId:c.tab.windowId,popupTabId:b.tabs[0].id};browser.windows.update(b.id,{left:screen.width-390,top:screen.height-255})}):"fechar"===a.acao&&browser.windows.getCurrent().then(b=>{b&&b.id&&browser.tabs.move(popups[b.id].popupTabId,{windowId:popups[b.id].windowId,index:popups[b.id].tabIndex}).then(d=>{a.activatePopupTab&&browser.tabs.highlight({windowId:popups[b.id].windowId,
tabs:[d[0].index]})})})}
chrome.runtime.onMessage.addListener(function(a,c){console.log("Background - Recieved message from content script  ---- ",a);a.showIcon||(a.popup?(console.log("Background - POPUP ",a),handlePopUp(a,c)):"fullscreen"==a.popoutSetting&&(console.log("Background - FULLSCREEN ",a),browser.tabs.create({active:!0,windowId:c.tab.windowId,url:c.url}).then(()=>{console.log("Created new tab: ",void 0)},function(b){console.log(`Error: ${b}`)})));console.log("Background, sender.tab.id",c.tab.id);chrome.tabs.sendMessage(c.tab.id,
{run:!0})});
