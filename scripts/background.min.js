let run=!0,previousTabIndex,popups={};chrome.tabs.onActivated.addListener(b=>{chrome.windows.get(b.windowId).then(c=>{"popup"!==c.type&&chrome.tabs.get(b.previousTabId).then(a=>{previousTabIndex=a.index})})});
function handlePopUp(b,c){"criar"===b.acao?chrome.windows.create({width:370,height:230,type:"popup",tabId:c.tab.id}).then(a=>{popups[a.id]={tabIndex:c.tab.index,windowId:c.tab.windowId,popupTabId:a.tabs[0].id};chrome.windows.update(a.id,{left:screen.width-390,top:screen.height-255})}):"fechar"===b.acao&&chrome.windows.getCurrent().then(a=>{a&&a.id&&chrome.tabs.move(popups[a.id].popupTabId,{windowId:popups[a.id].windowId,index:popups[a.id].tabIndex}).then(d=>{b.activatePopupTab&&chrome.tabs.highlight({windowId:popups[a.id].windowId,
tabs:[d[0].index]})})})}chrome.runtime.onMessage.addListener(function(b,c){b.showIcon||(b.popup?handlePopUp(b,c):"fullscreen"==b.popoutSetting&&chrome.tabs.create({active:!0,windowId:c.tab.windowId,url:c.url}).then(()=>{},function(a){}));chrome.tabs.sendMessage(c.tab.id,{run:!0})});
